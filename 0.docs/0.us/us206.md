# Mise en place d'une stack de Monitoring (Log/Trace/Métrique)

## Besoins

- Collecte des métriques MainCluster / SubCluster
- Collecte des logs MainCluster / SubCluster
- Collecte des traces MainCluster / SubCluster
- Alerting
  - Santé des clusters
  - Santé des applications
- Reporting
  - Bilan de santé a la semaine auto
- Réactivité
  - Si app commence a trop consommer et flag comme non critique, scale a 0 (ou juste MR sur GitOps ?)

## Possibilités Techniques

- Prometheus = Stockage Metric > A Challenger
- Tempo = Stockage Trace > A Challenger
- Loki = Stockage Log > A Challenger
- Grafana = Visualisation > A Challenger

## Collection Pipeline

- [Vector](https://vector.dev/)
- [Alloy](https://grafana.com/docs/alloy/latest/)

### Vector

- <https://www.talos.dev/v1.10/talos-guides/configuration/logging/#vector-example>

## Database

### Metrics

- Prometheus
- Clickhouse
- VictoriaMetrics

### Traces

- Tempo
- Clickhouse
- VictoriaTraces

### Logs

- Loki
- Clickhouse
- VictoriaLogs

### Waiting

- <https://github.com/GreptimeTeam/greptimedb>

## Visualisation

- Grafana
- HyperDX

### Grafana

- <https://grafana.com/grafana/plugins/grafana-clickhouse-datasource/>
