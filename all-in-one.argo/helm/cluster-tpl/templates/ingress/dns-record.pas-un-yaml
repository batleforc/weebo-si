{{ $inDns := print (tpl .Values.dns.name .) "." .Values.dns.in.base }}
apiVersion: externaldns.k8s.io/v1alpha1
kind: DNSEndpoint
metadata:
  name: "{{ .Release.Name }}"
  namespace: "{{ .Release.Namespace }}"
  annotations:
    argocd.argoproj.io/sync-wave: "2"
spec:
  endpoints:
  - dnsName: {{ $inDns }}
    recordTTL: 60
    recordType: A
    targets:
    - {{ .Values.traefik.ips }}
  - dnsName: "*.{{ $inDns }}"
    recordTTL: 60
    recordType: A
    targets:
    - {{ .Values.traefik.ips }}
